function f(a){var e=0;return function(){return e<a.length?{done:!1,value:a[e++]}:{done:!0}}}function g(){var a=m,e="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return e?e.call(a):{next:f(a)}}var n=Function.bind.call(Function.call,Array.prototype.reduce),q=Function.bind.call(Function.call,Object.prototype.propertyIsEnumerable),r=Function.bind.call(Function.call,Array.prototype.concat),w=Reflect.ownKeys;
Object.values||(Object.values=function(a){return n(w(a),function(e,b){return r(e,"string"===typeof b&&q(a,b)?[a[b]]:[])},[])});Object.entries||(Object.entries=function(a){return n(w(a),function(e,b){return r(e,"string"===typeof b&&q(a,b)?[[b,a[b]]]:[])},[])});"serviceWorker"in navigator&&navigator.serviceWorker.register("/windmill/service-worker.js");var x=window.innerWidth||2E3,y=window.innerHeight||2E3,z=3*(y+x),A={};
function B(){var a=C;a.getBoundingClientRect();return{x:parseInt(a.style.left.slice(0,-2))+(z/2<<0),y:parseInt(a.style.top.slice(0,-2))}}function D(a,e){var b=C;b.style.left=a-(z/2<<0)+"px";b.style.top=e+"px"}var E=document.querySelector("#main"),C=document.querySelector(".line");C.style.width=z+"px";C.style.left="0px";C.style.top="0px";C.style.overflow="hidden";B();D(x/2<<0,y/2<<0);B();var F=null,G=0,H=!1,I,J=365,m=[];
function K(){var a=G+180;0>a?a=360+a:360<a&&(a-=360);a=H?a:G;if(0==a&&360>J&&359<J||a>=J&&a-.6<J){D(I.x,I.y);I.f.className="hit";navigator.vibrate&&navigator.vibrate([100]);var e=B();m=[];Object.values(A).forEach(function(l){if(e.x!=l.x||e.y!=l.y){var p=180*Math.atan2(-1*l.y- -1*e.y,l.x-e.x)/Math.PI;0>p&&(p=360+p);m.push({d:p,p:l})}});m.sort(function(l,p){return l.d-p.d});for(var b=a="false",h=g(),c=h.next();!c.done;c=h.next())if(c=c.value,G<c.d){a=c.d;b=c.p;break}"false"===a&&m[0]&&(a=m[0].d,b=m[0].p);
h=G+180;0>h?h=360+h:360<h&&(h-=360);var k="false",d="false",u=g();for(c=u.next();!c.done;c=u.next())if(c=c.value,h<c.d){k=c.d;d=c.p;break}"false"===k&&m[0]?(c=m[0].d,d=m[0].p):c=k;(0>a-G?a+(360-G):a-G)>(0>c-h?c+(360-h):c-h)?(J=c,I=d,H=!0):(J=a,I=b,H=!1);console.log({c:J,b:I,g:H,h:G,a:h})}C.style.transform="rotate("+(360-G)+"deg)";G+=.5;360===G&&(G=0)}function L(a){F||(F=a);K();window.requestAnimationFrame(L)}window.requestAnimationFrame(L);
function M(a,e){var b=document.createElement("div");b.style.left=a+"px";b.style.top=e+"px";b.className="dot";E.appendChild(b);A[a+","+e]={x:a,y:e,f:b};console.log({i:A});var h=B();m=[];Object.values(A).forEach(function(t){if(h.x!=t.x||h.y!=t.y){var v=180*Math.atan2(-1*t.y- -1*h.y,t.x-h.x)/Math.PI;0>v&&(v=360+v);m.push({d:v,p:t})}});m.sort(function(t,v){return t.d-v.d});for(var c=b="false",k=g(),d=k.next();!d.done;d=k.next())if(d=d.value,G<d.d){b=d.d;c=d.p;break}"false"===b&&m[0]&&(b=m[0].d,c=m[0].p);
k=G+180;0>k?k=360+k:360<k&&(k-=360);var u="false",l="false",p=g();for(d=p.next();!d.done;d=p.next())if(d=d.value,k<d.d){u=d.d;l=d.p;break}"false"===u&&m[0]?(d=m[0].d,l=m[0].p):d=u;(0>b-G?b+(360-G):b-G)>(0>d-k?d+(360-k):d-k)?(J=d,I=l,H=!0):(J=b,I=c,H=!1);console.log({c:J,b:I,g:H,h:G,a:k})}document.addEventListener(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)&&"ontouchstart"in window?"touchstart":"click",function(a){M(a.clientX||a.pageX,a.clientY||a.pageY)});
